"use strict";
/*
 * Copyright (c) 2016, salesforce.com, inc.
 * All rights reserved.
 * Licensed under the BSD 3-Clause license.
 * For full license text, see LICENSE.txt file in the repo root  or https://opensource.org/licenses/BSD-3-Clause
 */
const path = require('path');
const url = require('url');
const _ = require('lodash');
const urls = require(path.join(__dirname, 'urls'));
const srcDevUtil = require(path.join(__dirname, 'srcDevUtil'));
module.exports.getJwtAudienceUrl = function (oauthConfig) {
    // default audience must be...
    let audienceUrl = urls.production;
    const loginUrl = _.get(oauthConfig, 'loginUrl', '');
    const createdOrgInstance = _.get(oauthConfig, 'createdOrgInstance', '').trim().toLowerCase();
    if (process.env.SFDX_AUDIENCE_URL) {
        audienceUrl = process.env.SFDX_AUDIENCE_URL;
    }
    else if (srcDevUtil.isInternalUrl(loginUrl)) {
        // This is for internal developers when just doing authorize;
        audienceUrl = loginUrl;
    }
    else if (createdOrgInstance.startsWith('cs') || url.parse(loginUrl).hostname === 'test.salesforce.com') {
        audienceUrl = urls.sandbox;
    }
    else if (createdOrgInstance.startsWith('gs1')) {
        audienceUrl = 'https://gs1.salesforce.com';
    }
    return audienceUrl;
};

//# sourceMappingURL=jwtAudienceUrl.js.map
